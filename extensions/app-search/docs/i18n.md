# Internationalization (i18n) Guide

The App Search extension supports multiple languages through a type-safe i18n system.

## Supported Languages

- English (`en`)
- Japanese (`ja`)

## How It Works

### For Users

1. Open Raycast preferences
2. Navigate to Extensions → Search App
3. Select your preferred language from the dropdown
4. The extension will immediately update to use the selected language

### For Developers

#### Adding a New Language

1. **Create a new translation file** in `src/lib/i18n/translations/`

```typescript
// src/lib/i18n/translations/es.ts
import { I18nMessages } from "../types";

export const es: I18nMessages = {
  searchBarPlaceholder: "Buscar aplicaciones por nombre, propósito o categoría...",
  // ... add all required translations
};
```

2. **Update the types** in `src/lib/i18n/types.ts`

```typescript
export type SupportedLanguage = "en" | "ja" | "es";
```

3. **Register the translation** in `src/lib/i18n/index.ts`

```typescript
import { es } from "./translations/es";

const translations: Record<SupportedLanguage, I18nMessages> = {
  en,
  ja,
  es, // Add new language
};
```

4. **Update package.json preferences**

```json
{
  "preferences": [
    {
      "data": [
        { "title": "English", "value": "en" },
        { "title": "日本語 (Japanese)", "value": "ja" },
        { "title": "Español (Spanish)", "value": "es" }
      ]
    }
  ]
}
```

#### Using Translations in Components

```typescript
import { useTranslations } from "../lib/i18n";

function MyComponent() {
  const t = useTranslations();

  return (
    <List.Item
      title={t.myTitle}
      subtitle={t.mySubtitle}
      // For functions that take parameters
      description={t.myDescription("parameter")}
    />
  );
}
```

## Architecture

### Type Safety

All translations are strongly typed using the `I18nMessages` interface. This ensures:
- No missing translations at compile time
- Full IDE autocomplete support
- Type-safe function parameters for dynamic messages

### Translation Files

Translation files are organized by language code:

```
src/lib/i18n/
├── index.ts              # Main i18n logic
├── types.ts              # Type definitions
└── translations/
    ├── en.ts             # English
    └── ja.ts             # Japanese
```

### Preference Integration

The extension uses Raycast's built-in preference system:
- Preferences are stored locally
- Changes take effect immediately
- No extension reload required

## Best Practices

1. **Keep messages consistent**: Use the same key names across all languages
2. **Functions for dynamic content**: Use functions for messages that include variables
3. **Test all languages**: Verify translations appear correctly in the UI
4. **Use descriptive keys**: Make key names self-documenting (e.g., `searchBarPlaceholder`)
5. **Fallback to English**: Always provide English translations as the default

## Examples

### Simple Message

```typescript
// types.ts
interface I18nMessages {
  welcomeMessage: string;
}

// en.ts
welcomeMessage: "Welcome to App Search"

// ja.ts
welcomeMessage: "App Searchへようこそ"

// Component
const t = useTranslations();
<Text>{t.welcomeMessage}</Text>
```

### Dynamic Message

```typescript
// types.ts
interface I18nMessages {
  resultsCount: (count: number) => string;
}

// en.ts
resultsCount: (count) => `Found ${count} results`

// ja.ts
resultsCount: (count) => `${count}件の結果が見つかりました`

// Component
const t = useTranslations();
<Text>{t.resultsCount(results.length)}</Text>
```
